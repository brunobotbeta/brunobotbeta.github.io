<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrunoBot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: url('https://londonmymind.com/wp-content/uploads/2022/01/Sunset-in-London-Hero-2-1024x683.jpg') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        .container {
            margin-top: 10%;
        }

        input, button {
            padding: 10px;
            font-size: 16px;
            margin: 5px;
            border-radius: 5px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="welcome"></h1>
        <div>
            <input type="text" id="input" placeholder="Ask me something...">
            <button onclick="processInput()">Submit</button>
        </div>
        <p id="output"></p>
        <button onclick="logout()">Logout</button>
    </div>

    <script>
        // Mock User Data for Login Validation
        const users = {
            "bruno": "password123",
            "admin": "adminpassword",
            "user1": "user1password"
        };

        // Check if User is Logged In
        document.addEventListener('DOMContentLoaded', () => {
            const loggedInUser = localStorage.getItem('loggedInUser');

            if (!loggedInUser) {
                window.location.href = 'login.html'; // Redirect to login page if not logged in
            } else {
                document.getElementById('welcome').textContent = `Welcome, ${loggedInUser}! Ask me anything!`;
            }
        });

        // Logout Functionality
        function logout() {
            localStorage.removeItem('loggedInUser');
            window.location.href = 'login.html';
        }

        // Process User Input
        function processInput() {
            const input = document.getElementById('input').value.toLowerCase();
            const output = document.getElementById('output');

            // Sample responses for questions
            const responses = {
                "hello": "Hi there! How can I help you?",
                "hi": "Hello! What's on your mind?",
                "what's the time": () => `The current time is ${new Date().toLocaleTimeString()}.`,
                "weather in london": () => fetchWeather("London"),
                "play brunle": "Let's play Brunle! Guess the 5-letter word.",
                "logout": () => logout(),
                "what is 2+2": "It's 4!"
            };

            // Check for direct match or alternative words
            if (responses[input]) {
                const reply = responses[input];
                output.textContent = typeof reply === 'function' ? reply() : reply;
            } else {
                output.textContent = "I didn't understand that. Please try again.";
            }
        }

        // Fetch Weather Data
        function fetchWeather(city) {
            const apiKey = "434ce40c5261c3ea43477f902ee0fd78";
            fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}`)
                .then(response => response.json())
                .then(data => {
                    const tempCelsius = (data.main.temp - 273.15).toFixed(2);
                    document.getElementById('output').textContent = `The weather in ${city} is ${tempCelsius}Â°C with ${data.weather[0].description}.`;
                })
                .catch(() => {
                    document.getElementById('output').textContent = "Couldn't fetch the weather. Please try again.";
                });
        }
    </script>
</body>
</html>
